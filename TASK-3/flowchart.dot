digraph HastaneSistemi_Gelistirilmis {
    // === Genel Ayarlar ===
    rankdir=LR;
    splines=ortho;
    nodesep=0.8;
    ranksep=1.0;
    graph [
        fontname="Arial",
        fontsize=14,
        label="ğŸ¥ GeliÅŸtirilmiÅŸ Hastane Randevu, Tahlil ve Geri Bildirim Sistemi AkÄ±ÅŸ ÅemasÄ±",
        labelloc=t,
        bgcolor="#fafafa"
    ];
    node [
        fontname="Arial",
        fontsize=11,
        style="rounded,filled"
    ];
    edge [
        fontname="Arial",
        fontsize=10
    ];

    // === BaÅŸlangÄ±Ã§ & BitiÅŸ ===
    start [label="ğŸŸ¢ BAÅLA", shape=oval, fillcolor="#c8e6c9"];
    end [label="ğŸ”´ SON", shape=oval, fillcolor="#ffcdd2"];

    // === VeritabanÄ± ===
    db [label="ğŸ’½ VeritabanÄ±", shape=cylinder, fillcolor="#d1c4e9"];

    // === 1ï¸âƒ£ Kimlik DoÄŸrulama ModÃ¼lÃ¼ ===
    subgraph cluster_kimlik {
        label="1ï¸âƒ£ Kimlik DoÄŸrulama ve KullanÄ±cÄ± YÃ¶netimi";
        style="rounded"; color="#4b8bbe";
        bgcolor="#f5f9ff";

        n1 [label="ğŸ‘¤ TC ve Åifre GiriÅŸi", shape=rectangle, fillcolor="#e3f2fd"];
        n2 [label="GiriÅŸ Bilgileri DoÄŸru mu?", shape=diamond, fillcolor="#fff9c4"];
        n3 [label="HatalÄ± giriÅŸ sayÄ±sÄ±nÄ± artÄ±r", shape=rectangle, fillcolor="#e3f2fd"];
        n4 [label="3 hatalÄ± deneme sonrasÄ±\nhesap kilitlenir", shape=rectangle, fillcolor="#e3f2fd"];
        n5 [label="KullanÄ±cÄ± RolÃ¼ Belirlenir\n(Hasta / Doktor / YÃ¶netici)", shape=rectangle, fillcolor="#e3f2fd"];

        n1 -> n2;
        n2 -> n3 [label=" HayÄ±r", color="#d32f2f", fontcolor="#d32f2f"];
        n3 -> n2 [label=" Tekrar Dene"];
        n3 -> n4 [label=" SayÄ± >= 3"];
        n2 -> n5 [label=" Evet", color="#388e3c", fontcolor="#388e3c"];
    }

    role_check [label="KullanÄ±cÄ± RolÃ¼ Nedir?", shape=diamond, fillcolor="#fff9c4"];

    // === 2ï¸âƒ£ Ana MenÃ¼ ModÃ¼lÃ¼ ===
    subgraph cluster_menu {
        label="2ï¸âƒ£ Ana MenÃ¼ler ve Ä°ÅŸlem SeÃ§imi";
        style="rounded"; color="#ffb347";
        bgcolor="#fff8e1";

        m_hasta [label="ğŸ‘¤ Hasta MenÃ¼sÃ¼:\n1. Randevu Ä°ÅŸlemleri\n2. Tahlil SonuÃ§larÄ±\n3. Geri Bildirimler\n4. Ã‡Ä±kÄ±ÅŸ", shape=rectangle, fillcolor="#e3f2fd"];
        m_doktor [label="ğŸ©º Doktor MenÃ¼sÃ¼:\n1. Randevu Takvimi\n2. Hasta Tahlilleri\n3. Anket SonuÃ§larÄ±\n4. Ã‡Ä±kÄ±ÅŸ", shape=rectangle, fillcolor="#e3f2fd"];
        m_yonetici [label="âš™ï¸ YÃ¶netici MenÃ¼sÃ¼:\n1. KullanÄ±cÄ± YÃ¶netimi\n2. Sistem AyarlarÄ±\n3. Anket Analizi\n4. Ã‡Ä±kÄ±ÅŸ", shape=rectangle, fillcolor="#e3f2fd"];
    }

    // === 3ï¸âƒ£ Randevu ModÃ¼lÃ¼ ===
    subgraph cluster_randevu {
        label="3ï¸âƒ£ Randevu Alma ModÃ¼lÃ¼";
        style="rounded"; color="#66ccff";
        bgcolor="#f0faff";

        r1 [label="ğŸ“… BranÅŸ ve Tarih SeÃ§imi"];
        r2 [label="Uygun Doktor ve Saatleri Listele"];
        r3 [label="SeÃ§ilen Saat Uygun mu?", shape=diamond, fillcolor="#fff9c4"];
        r4 [label="Yeni SeÃ§im Yap"];
        r5 [label="âœ… Randevuyu Onayla"];
        r6 [label="ğŸ“¨ SMS/E-posta ile Bildirim GÃ¶nder"];
        r7 [label="ğŸ“‹ Randevu GeÃ§miÅŸi GÃ¶rÃ¼ntÃ¼le / Ä°ptal Et"];

        r1 -> r2 -> r3;
        r3 -> r5 [label="Evet", color="#388e3c", fontcolor="#388e3c"];
        r3 -> r4 [label="HayÄ±r", color="#d32f2f", fontcolor="#d32f2f"];
        r4 -> r1;
        r5 -> r6 -> r7;
    }

    // === 4ï¸âƒ£ Tahlil ModÃ¼lÃ¼ ===
    subgraph cluster_tahlil {
        label="4ï¸âƒ£ Tahlil SonuÃ§ ModÃ¼lÃ¼";
        style="rounded"; color="#ff9999";
        bgcolor="#fff5f5";

        t1 [label="ğŸ”¬ GÃ¶rÃ¼ntÃ¼lenecek Tahlili SeÃ§"];
        t2 [label="Tahlil Sonucu HazÄ±r mÄ±?", shape=diamond, fillcolor="#fff9c4"];
        t3 [label="â³ HazÄ±rlanma sÃ¼resi gÃ¶ster"];
        t4 [label="ğŸ“Š Sonucu GÃ¶rÃ¼ntÃ¼le (Grafik/Tablo)"];
        t5 [label="âœï¸ Doktor Yorumu GÃ¶rÃ¼ntÃ¼le"];
        t6 [label="ğŸ“¥ Sonucu Ä°ndir (PDF, Excel)"];

        t1 -> t2;
        t2 -> t3 [label="HayÄ±r", color="#d32f2f", fontcolor="#d32f2f"];
        t2 -> t4 [label="Evet", color="#388e3c", fontcolor="#388e3c"];
        t4 -> t5 -> t6;
    }

    // === 5ï¸âƒ£ Anket ve Geri Bildirim ModÃ¼lÃ¼ ===
    subgraph cluster_anket {
        label="5ï¸âƒ£ Anket ve Geri Bildirim ModÃ¼lÃ¼";
        style="rounded"; color="#a4d792";
        bgcolor="#f5fff5";

        a1 [label="ğŸ—’ï¸ KullanÄ±cÄ± Geri Bildirim MenÃ¼sÃ¼"];
        a2 [label="Anket veya Serbest Geri Bildirim SeÃ§imi"];
        a3 [label="ğŸ“‹ Anket SorularÄ±nÄ± YanÄ±tla"];
        a4 [label="âœï¸ Yorum / Ã–neri Yaz"];
        a5 [label="âœ… GÃ¶nder ve VeritabanÄ±na Kaydet"];
        a6 [label="ğŸ“ˆ Geri Bildirim Analizi (YÃ¶netici Paneli)"];

        a1 -> a2;
        a2 -> a3 [label="Anket"];
        a2 -> a4 [label="Serbest Yorum"];
        a3 -> a5;
        a4 -> a5;
        a5 -> a6 [style=dashed, label="Analiz iÃ§in gÃ¶nder"];
    }

    // === Doktor ve YÃ¶netici AkÄ±ÅŸlarÄ± ===
    doktor_randevu [label="ğŸ“… Doktor Randevu Takvimini YÃ¶netir", shape=rectangle, fillcolor="#e3f2fd"];
    yonetici_kullanici [label="ğŸ§© YÃ¶netici KullanÄ±cÄ± HesaplarÄ±nÄ± YÃ¶netir", shape=rectangle, fillcolor="#e3f2fd"];

    // === Lejant ===
    subgraph cluster_legend {
        label="ğŸ“˜ Lejant";
        rank=sink;
        key [shape=plaintext,
             label=<<table border="0" cellborder="1" cellspacing="0" cellpadding="4">
              <tr><td align="right">BaÅŸla / Son</td><td>Oval (YeÅŸil / KÄ±rmÄ±zÄ±)</td></tr>
              <tr><td align="right">Ä°ÅŸlem AdÄ±mÄ±</td><td>DikdÃ¶rtgen (Mavi)</td></tr>
              <tr><td align="right">Karar NoktasÄ±</td><td>Baklava (SarÄ±)</td></tr>
              <tr><td align="right">VeritabanÄ±</td><td>Silindir (Mor)</td></tr>
              <tr><td align="right">BaÅŸarÄ±lÄ± AkÄ±ÅŸ</td><td>YeÅŸil Ok</td></tr>
              <tr><td align="right">BaÅŸarÄ±sÄ±z AkÄ±ÅŸ</td><td>KÄ±rmÄ±zÄ± Ok</td></tr>
             </table>>
        ];
    }

    // === Ana AkÄ±ÅŸ ===
    start -> n1;
    n5 -> role_check;
    role_check -> m_hasta [label="Hasta"];
    role_check -> m_doktor [label="Doktor"];
    role_check -> m_yonetici [label="YÃ¶netici"];

    // Hasta AkÄ±ÅŸÄ±
    m_hasta -> r1 [label="1. Randevu"];
    m_hasta -> t1 [label="2. Tahlil"];
    m_hasta -> a1 [label="3. Geri Bildirim"];
    m_hasta -> end [label="4. Ã‡Ä±kÄ±ÅŸ"];

    // ModÃ¼ller ArasÄ± DÃ¶nÃ¼ÅŸ
    r7 -> m_hasta [label="MenÃ¼ye DÃ¶n"];
    t6 -> m_hasta [label="MenÃ¼ye DÃ¶n"];
    t3 -> m_hasta [label="MenÃ¼ye DÃ¶n"];
    a6 -> m_yonetici [label="Analiz"];

    // Doktor ve YÃ¶netici AkÄ±ÅŸlarÄ±
    m_doktor -> doktor_randevu;
    doktor_randevu -> m_doktor [label="MenÃ¼ye DÃ¶n"];
    m_doktor -> end [label="4. Ã‡Ä±kÄ±ÅŸ"];
    m_yonetici -> yonetici_kullanici;
    yonetici_kullanici -> m_yonetici [label="MenÃ¼ye DÃ¶n"];
    m_yonetici -> end [label="4. Ã‡Ä±kÄ±ÅŸ"];

    // VeritabanÄ± EtkileÅŸimleri (Kesikli)
    edge [style=dashed, color=gray, constraint=false];
    n2 -> db [label=" KullanÄ±cÄ± Oku"];
    n5 -> db;
    r2 -> db [label=" Randevu Oku"];
    r5 -> db [label=" Randevu Yaz"];
    t2 -> db [label=" Tahlil Oku"];
    a5 -> db [label=" Geri Bildirim Yaz"];
    doktor_randevu -> db;
    yonetici_kullanici -> db;
}

